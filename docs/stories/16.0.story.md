# User Story 16.0: Mobile Adaptation of Immersive Listing Modal

## Story Overview
**As a** mobile user browsing property listings  
**I want** to view detailed listing information in an immersive, mobile-optimized modal  
**So that** I can access all property details comfortably on my mobile device without losing any information available on desktop

## Background
The current immersive listing modal provides a premium desktop experience with a split-screen layout (40% visual hero, 60% information panel). Mobile users need the same comprehensive information presented in a touch-friendly, responsive interface that works well on smaller screens.

## Acceptance Criteria

### 1. Mobile Layout Structure
- [ ] Implement bottom sheet pattern with three snap positions:
  - Peek state (25vh): Shows company info and tab navigation
  - Half state (60vh): Default viewing position
  - Full state (90vh): Maximum content visibility
- [ ] Visual hero section is collapsible:
  - Expanded: 35vh height
  - Collapsed: 80px height with visual indicators still visible
- [ ] Sticky header (56px) remains visible with company name and close button

### 2. Information Parity with Desktop
- [ ] All desktop information must be accessible on mobile:
  - Company branding (logo, name)
  - Property type (residential/commercial)
  - Location data (specific locations or nationwide)
  - Site specifications (size/acreage/dwelling count)
  - Requirements (sectors, use classes)
  - Contact details with all team members
  - Resources (brochures, property pages)
  - FAQs section
- [ ] All 5 tabs from desktop must be present:
  - Overview (From {Company Name})
  - Requirements
  - Locations
  - Contact
  - FAQs

### 3. Touch Interactions
- [ ] Implement swipe gestures:
  - Vertical swipe on visual hero to expand/collapse
  - Vertical swipe on bottom sheet to adjust height
  - Horizontal swipe on tabs for navigation
  - Pull-to-dismiss from collapsed state
- [ ] All interactive elements have minimum 44px touch targets
- [ ] Add 8px minimum spacing between touch targets
- [ ] Implement haptic feedback for key interactions (where supported)

### 4. Visual Content Adaptation
- [ ] Visual hero maintains all desktop functionality:
  - Interactive map view with location pins
  - Image gallery for fit-outs
  - Site plans gallery
  - Nationwide coverage visual
- [ ] Visual content toggles (Map/Gallery/Coverage) accessible in collapsed state
- [ ] Location count badge overlay on map view
- [ ] Progressive image loading for galleries

### 5. Content Organization
- [ ] Company info card always visible in bottom sheet
- [ ] Tab navigation with horizontal scroll for overflow
- [ ] Card-based layouts for content sections
- [ ] Expandable sections for long content with "View More" buttons
- [ ] Download buttons for brochures maintain functionality
- [ ] External links to property pages open in new tabs

### 6. Performance Requirements
- [ ] Lazy load tab content (load on demand)
- [ ] GPU-accelerated animations using transform/opacity only
- [ ] Implement virtual scrolling for long contact lists
- [ ] Total bundle size increase < 50KB
- [ ] First meaningful paint < 2s on 3G connection

### 7. Accessibility
- [ ] Support for screen readers with proper ARIA labels
- [ ] Keyboard navigation fallback for all interactions
- [ ] Reduced motion support (respects prefers-reduced-motion)
- [ ] High contrast mode compatibility
- [ ] Focus indicators for keyboard navigation

## Technical Implementation Details

### Component Structure
```
ImmersiveListingModal/
├── MobileBottomSheet.tsx (new)
├── MobileVisualHero.tsx (new)
├── MobileTabNavigation.tsx (new)
└── hooks/
    ├── useBottomSheetGestures.ts (new)
    └── useMobileBreakpoint.ts (new)
```

### Responsive Breakpoints
- Mobile: < 768px (bottom sheet implementation)
- Tablet: 768px - 1024px (hybrid approach)
- Desktop: > 1024px (existing split-screen)

### Animation Specifications
```javascript
bottomSheetAnimation: {
  snapPoints: [0.25, 0.6, 0.9],
  springConfig: { damping: 0.8, velocity: 0.5 }
}

visualHeroAnimation: {
  expanded: { height: '35vh', transition: 'spring(1, 70, 10)' },
  collapsed: { height: '80px', transition: 'spring(1, 70, 10)' }
}
```

## Dependencies
- Framer Motion for gesture handling and animations
- React Spring for bottom sheet physics
- Existing ImmersiveListingModal components
- Mobile-specific CSS modules

## Definition of Done
- [ ] All acceptance criteria met
- [ ] Mobile testing on iOS Safari, Chrome Android
- [ ] Accessibility audit passed (WCAG 2.1 AA)
- [ ] Performance budget maintained
- [ ] Code review approved
- [ ] Documentation updated
- [ ] E2E tests for mobile interactions

## Notes
- Maintain visual consistency with desktop branding
- Progressive enhancement approach (desktop features gracefully adapt)
- Consider tablet as intermediate breakpoint
- Ensure smooth transition between breakpoints

## Priority: High
## Story Points: 13
## Sprint: Current