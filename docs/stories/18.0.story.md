# Story 18.0: Agent Directory Platform - Epic

## Status: Planning

## Epic Summary

As a **platform stakeholder**,
I want **a comprehensive Agent Directory feature**,
So that **property agencies can maintain searchable, version-controlled profiles with team listings and dynamic company associations**.

## Epic Context

**New System Requirements:**
- New feature addition to existing platform
- Technology: Next.js 14, React, TypeScript, Tailwind CSS, Supabase
- Follows pattern: Existing listing versioning and approval workflows
- Touch points: Main navigation, listing system, admin panel, user authentication

## Business Objectives

1. **Market Transparency**: Create a centralized, searchable directory of property agencies
2. **Agency Engagement**: Drive agency participation through professional profile management
3. **Cross-Platform Synergy**: Establish bi-directional relationships between agencies and listings
4. **Quality Assurance**: Maintain platform integrity through version control and moderation
5. **User Discovery**: Enable efficient agency discovery through search and filtering

## Success Metrics

- **Adoption Rate**: 50+ agencies registered within 3 months
- **Search Utilization**: 30% of platform users accessing Agent Directory monthly
- **Cross-Linking**: 40% of existing listings linked to agencies within 6 months
- **Profile Completeness**: 75% of registered agencies with complete profiles
- **Approval Turnaround**: <24 hours average for agency version reviews

## User Stories

1. **18.1**: Agency Directory Landing Page
2. **18.2**: Agency Registration & Profile Creation
   - **18.2a**: Agency Edit View
3. **18.3**: Team Member Management
4. **18.4**: Agency Public Profile Display
5. **18.5**: Individual Team Member Pages
6. **18.6**: Listing-Agency Linking System
7. **18.7**: Agency Version Control & Approval
8. **18.8**: Agency Dashboard Integration
9. **18.9**: Agency RLS (Row Level Security) Policies

## Technical Architecture

**Database Schema:**
- `agencies`: Core agency table
- `agency_versions`: Version control system
- `agency_team_members`: Team member profiles
- `listings.linked_agency_id`: New column for associations
- `agency_audit_log`: Audit trail

**API Endpoints:**
- `GET /api/agencies` - List with filters
- `GET /api/agencies/:id` - Agency details
- `POST /api/agencies` - Create agency
- `PUT /api/agencies/:id` - Update (creates version)
- `POST /api/agencies/:id/submit` - Submit for approval

## Implementation Phases

### Phase 1: Foundation (Sprint 1-2)
- Database schema and migrations
- Basic CRUD operations
- Agency registration flow
- Admin approval workflow

### Phase 2: Public Interface (Sprint 3-4)
- Directory page with search/filter
- Agency detail pages
- Team member pages
- Responsive design

### Phase 3: Integration (Sprint 5-6)
- Listing-agency linking
- "Companies We Work With" carousel
- Version control UI
- Email notifications

### Phase 4: Enhancement (Sprint 7-8)
- Advanced search capabilities
- Bulk operations for admins
- Analytics dashboard
- Performance optimization

## Definition of Done

- [ ] All user stories implemented and tested
- [ ] Unit test coverage >80%
- [ ] E2E tests for critical paths
- [ ] Performance benchmarks met (<2s page load)
- [ ] Accessibility WCAG 2.1 AA compliant
- [ ] Documentation updated
- [ ] Security review completed
- [ ] UAT sign-off received
- [ ] Production deployment successful
- [ ] Monitoring and alerts configured